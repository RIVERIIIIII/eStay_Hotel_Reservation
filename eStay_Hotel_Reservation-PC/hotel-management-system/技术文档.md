# 酒店管理系统 - PC端技术文档

## 1. 简介

本文档详细阐述了酒店管理系统的架构设计、功能实现、关键技术点及开发过程中的挑战与解决方案。该系统实现了用户认证、酒店管理、审核流程等核心模块，为商户和管理员提供了完整的酒店运营管理功能。

### 测试账户说明

请使用以下 Demo 账户进行功能测试：

- **管理员账户**：
  - 用户名：admin
  - 密码：admin123

- **商户账户**：
  - 用户名：merchant
  - 密码：merchant123

## 2. 交付信息

| 项目 | 内容 |
|------|------|
| 交付项 | 酒店管理系统 - PC端应用 |
| 产物地址 | d:\BaiduNetdiskDownload\Git\PC\hotel-management-system |

| 页面截图 | 描述 |
|----------|------|
| ![alt text](image.png) ![alt text](image-1.png)| 登录页面 |
| ![alt text](image-2.png) | 注册页面 |
| ![alt text](image-3.png) | 商户酒店列表页面 |
| ![alt text](image-4.png) | 商户会话页面 |
| ![alt text](image-5.png) | 商户添加/编辑酒店页面 |
| ![alt text](image-6.png) | 管理员审核酒店页面 |
| ![alt text](image-7.png)![alt text](image-9.png) | 管理员管理酒店页面 |
| ![alt text](image-8.png) | 管理员酒店详情页面 |

## 3. 实现的功能列表

### 3.1 基础与核心功能

| 功能模块 | 功能点 | 实现情况 |
|----------|--------|----------|
| 认证系统 | 用户登录 | ✅ 已完成。实现了用户名密码登录，支持不同角色登录 |
| 认证系统 | 用户注册 | ✅ 已完成。支持商户和管理员角色注册 |
| 认证系统 | 忘记密码 | ✅ 已完成。提供密码重置功能 |
| 商户功能 | 酒店列表 | ✅ 已完成。展示商户所有酒店，支持状态显示和操作 |
| 商户功能 | 添加酒店 | ✅ 已完成。完整的酒店信息录入表单，支持设施选择、图片上传 |
| 商户功能 | 编辑酒店 | ✅ 已完成。支持修改酒店所有信息，包括联系电话 |
| 商户功能 | 删除酒店 | ✅ 已完成。支持酒店删除操作 |
| 商户功能 | 在线客服 | ✅ 已完成。提供商户与平台的沟通渠道 |
| 商户功能 | 联系电话 | ✅ 已完成。新增必填字段，用于酒店联系电话 |
| 管理员功能 | 待审核酒店 | ✅ 已完成。展示所有待审核酒店列表，美化空白状态 |
| 管理员功能 | 酒店审核 | ✅ 已完成。支持通过/拒绝酒店审核，拒绝时需填写原因 |
| 管理员功能 | 酒店详情 | ✅ 已完成。查看酒店详细信息，包括联系电话和图片 |
| 管理员功能 | 酒店管理 | ✅ 已完成。管理已审核酒店的发布状态，支持发布和下线操作 |
| 管理员功能 | 美化界面 | ✅ 已完成。优化空白状态页面，提升用户体验 |

## 4. 架构与关键设计思路

### 4.1 整体架构

本项目采用前后端分离架构，前端基于 React + Vite 构建，主要包含以下层次：

- **表现层**：由 React 组件和页面组成，负责 UI 渲染和用户交互
- **路由层**：基于 React Router 实现页面导航和权限控制
- **状态管理**：使用 Context API 进行全局状态管理（如用户认证状态）
- **服务层**：封装 API 调用和业务逻辑，与后端服务集成
- **数据持久层**：使用 localStorage 存储用户认证信息

### 4.2 关键设计思路

| 设计点 | 实现方式 | 带来的优势 |
|--------|----------|------------|
| 基于角色的权限控制 | 使用 ProtectedRoute 组件，根据 user.role 进行路由保护 | 确保不同角色只能访问对应权限的页面，提高系统安全性 |
| 模块化组件设计 | 将 UI 拆分为可复用组件，如 Navbar 等 | 提高代码复用性和可维护性，减少重复代码 |
| 集中式状态管理 | 使用 AuthContext 管理用户认证状态 | 实现认证状态的全局共享，简化组件间状态传递 |
| 服务层封装 | 统一封装 API 调用，处理错误和异常情况 | 简化组件代码，提高可维护性，便于后端集成 |
| 响应式表单处理 | 使用 useState 管理表单状态，实现实时验证 | 提供良好的用户体验，减少提交错误 |
| 美化空白状态 | 为无数据状态设计美观的占位页面 | 提升用户体验，使界面更加专业 |
| 多字段兼容 | 支持多种可能的字段名，确保数据正确显示 | 提高系统兼容性，减少后端依赖 |

## 5. 遇到的挑战与解决方案

| 问题描述 | 根本原因 | 解决方案 |
|----------|----------|----------|
| 权限控制实现 | 需要根据用户角色限制页面访问 | 实现 ProtectedRoute 组件，结合 AuthContext 进行权限判断 |
| 表单数据处理 | 酒店表单字段较多，状态管理复杂 | 使用 useState 统一管理表单状态，实现字段验证和错误提示 |
| 设施选择交互 | 设施多选需要友好的交互方式 | 实现标签式选择组件，支持点击切换选中状态 |
| 数据持久化 | 用户登录状态需要在页面刷新后保持 | 使用 localStorage 存储用户信息和 token，页面加载时恢复状态 |
| 前后端集成 | 后端 API 路径和格式与前端期望不一致 | 在服务层中添加适配逻辑，支持多种可能的字段名和格式 |
| 发布/下线功能 | 后端缺少对应的 API 端点 | 在后端添加 publishHotel 和 offlineHotel 方法及路由 |
| 空白状态美化 | 无数据时页面显示单调 | 设计统一的空白状态组件，包含图标、标题和描述 |
| 联系电话字段 | 需要在多个页面添加新字段 | 统一修改表单、详情和服务层，确保字段一致性 |

## 6. 技术栈与依赖

| 技术/依赖 | 版本 | 用途 |
|-----------|------|------|
| React | 19.2.0 | 前端 UI 库 |
| React DOM | 19.2.0 | React 渲染器 |
| React Router DOM | 7.13.0 | 页面路由管理 |
| Axios | 1.13.5 | HTTP 请求客户端 |
| Vite | 7.3.1 | 前端构建工具 |
| Node.js | 24.13.1 | 运行环境 |
| Express | 4.x | 后端框架（独立仓库） |
| MongoDB | 5.x | 数据库（独立仓库） |

## 7. 项目结构

```
hotel-management-system/
├── src/
│   ├── components/          # 通用组件
│   │   └── Navbar.jsx       # 导航栏组件
│   ├── context/             # 上下文管理
│   │   └── AuthContext.jsx  # 认证上下文
│   ├── pages/               # 页面组件
│   │   ├── Admin/           # 管理员页面
│   │   │   ├── HotelDetail.jsx       # 酒店详情
│   │   │   ├── HotelManagement.jsx   # 酒店管理
│   │   │   └── HotelReview.jsx        # 酒店审核
│   │   ├── Auth/            # 认证页面
│   │   │   ├── Auth.css
│   │   │   ├── Login.jsx
│   │   │   ├── Register.jsx
│   │   │   └── ForgotPassword.jsx
│   │   └── Merchant/        # 商户页面
│   │       ├── Chat.css
│   │       ├── Chat.jsx
│   │       ├── HotelForm.jsx
│   │       └── HotelList.jsx
│   ├── services/            # 服务层
│   │   ├── adminService.js  # 管理员服务
│   │   ├── apiConfig.js     # API配置
│   │   ├── authService.js   # 认证服务
│   │   ├── chatService.js   # 聊天服务
│   │   ├── hotelService.js  # 酒店服务
│   │   └── mockData.js      # 模拟数据
│   ├── App.css              # 应用样式
│   ├── App.jsx              # 应用主组件
│   ├── index.css            # 全局样式
│   └── main.jsx             # 应用入口
├── public/                  # 静态资源
├── package.json             # 项目配置
├── vite.config.js           # Vite 配置
├── README.md                # 项目说明
└── 技术文档.md              # 技术文档
```

## 8. 运行与部署

### 8.1 开发环境运行

1. **安装依赖**：
   ```bash
   npm install
   ```

2. **启动前端开发服务器**：
   ```bash
   npm run dev
   ```

3. **启动后端服务**（独立仓库）：
   ```bash
   cd d:\BaiduNetdiskDownload\Git\PC\eStay_Hotel_Reservation\backend
   npm install
   npm run dev
   ```

4. **访问地址**：
   - 前端：http://localhost:5173/
   - 后端：http://localhost:5000/

### 8.2 生产环境构建

1. **构建生产版本**：
   ```bash
   npm run build
   ```

2. **构建产物**：
   构建产物位于 `dist` 目录，可部署到任何静态文件服务器。

### 8.3 后端集成

后端服务提供以下 API 端点：

| 端点 | 方法 | 功能 |
|------|------|------|
| /api/auth/login | POST | 用户登录 |
| /api/auth/register | POST | 用户注册 |
| /api/hotels | GET | 获取酒店列表 |
| /api/hotels | POST | 添加酒店 |
| /api/hotels/:id | PUT | 更新酒店 |
| /api/hotels/:id | DELETE | 删除酒店 |
| /api/admin/hotels/pending | GET | 获取待审核酒店 |
| /api/admin/hotels/:id/approve | PUT | 审核通过酒店 |
| /api/admin/hotels/:id/reject | PUT | 审核拒绝酒店 |
| /api/admin/hotels/:id/publish | PUT | 发布酒店 |
| /api/admin/hotels/:id/offline | PUT | 下线酒店 |

## 9. 关键功能实现

### 9.1 酒店表单管理

- **实现位置**：`src/pages/Merchant/HotelForm.jsx`
- **核心功能**：
  - 酒店信息的添加和编辑
  - 联系电话必填字段
  - 房型管理
  - 设施选择
  - 图片上传
  - 表单验证

### 9.2 酒店列表管理

- **实现位置**：`src/pages/Merchant/HotelList.jsx`
- **核心功能**：
  - 酒店列表展示
  - 状态显示
  - 编辑和删除操作
  - 美化空白状态

### 9.3 酒店审核系统

- **实现位置**：`src/pages/Admin/HotelReview.jsx`
- **核心功能**：
  - 待审核酒店列表
  - 通过/拒绝操作
  - 拒绝原因填写
  - 美化空白状态

### 9.4 酒店管理系统

- **实现位置**：`src/pages/Admin/HotelManagement.jsx`
- **核心功能**：
  - 酒店发布状态管理
  - 发布和下线操作
  - 美化空白状态

### 9.5 在线客服系统

- **实现位置**：`src/pages/Merchant/Chat.jsx`
- **核心功能**：
  - 聊天列表展示
  - 消息发送和接收
  - 用户区分

## 10. 总结

本酒店管理系统实现了完整的商户和管理员功能，采用现代化的 React 技术栈构建，具有良好的用户体验和代码架构。系统通过模块化设计和权限控制，为不同角色的用户提供了专属的功能界面，满足了酒店运营管理的核心需求。

### 已完成的优化

1. **新增联系电话字段**：在酒店表单中添加必填的联系电话字段，确保酒店信息的完整性
2. **美化空白状态**：优化商户端和管理员端的空白状态页面，提升用户体验
3. **完善酒店详情**：在管理员详情页面添加联系电话和图片展示
4. **修复发布/下线功能**：在后端添加对应的 API 端点，确保功能正常
5. **优化编辑功能**：确保编辑酒店时所有字段都能正确显示，包括联系电话
6. **更新文档**：完善 README 和技术文档，反映最新的功能实现

### 未来可考虑的优化方向

- **接入真实后端 API**：进一步完善前后端交互，实现完整的业务流程
- **增加数据可视化**：添加酒店运营数据统计和分析功能
- **优化移动端响应式**：提升在移动设备上的用户体验
- **增加更多功能**：如酒店评论管理、订单管理等
- **性能优化**：减少 API 调用，优化图片加载

本项目通过系统性的设计和实现，为酒店管理提供了一个功能完整、界面美观、用户友好的解决方案。